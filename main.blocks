<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="}CZ|d@Q}079J_)i5Z?$y">validPosition</variable><variable id="ncM*AkOnb$uWh-0*Ft}X">x</variable><variable id="Xu/EQ$W596NZeWxsm|-?">y</variable><variable id="omRj!Gw(ddDOk1kaEKeE">snakeHead</variable><variable id="~yY5wc:^AdZVsThFcn0x">snakeTail</variable><variable id="PlwaztFXvg=bl2p0cvNx">part</variable><variable id="HNbH;-1x=fJBIIlyR0?g">mushroom</variable><variable id="d`C)Bp_2F*=R^+DU/VaO">x2</variable><variable id="1g0O-P8[39`]4[j^?Xhy">y2</variable><variable id=";In?f%IDopW)JuSppk#k">gameScore</variable><variable id="oTq|-+yYdRNA2kF2vU~Q">snakeSpeed</variable><variable id="aLW#MCeMqd,H9,*33Ij%">prevX</variable><variable id=".wpzdpdpN)Rt|++TJmfI">prevY</variable><variable id="~VV0uO:T`f2t#UH%5wQY">tailEnd</variable><variable id=";e2:10#Mxd6=$p:ZRbyM">segment</variable><variable id="AT/CFI);*9![D)R@m+tk">snakeCrash</variable></variables><comment id="(D~|*?k*RLB[0.X+@V8@" x="970.421875" y="2017.5" w="480" h="120">
Snake Game for Calliope mini V2 (fixed tail deletion order)
</comment><comment id="/#RNQG!:pnNXCjPFDcj$" x="1495.421875" y="2017.5" w="480" h="120">
---------------------------------------------------------
</comment><comment id="=n[J+QRRb4g0b[1]a7DR" x="2020.421875" y="2017.5" w="160" h="120">
Controls:
</comment><comment id="328aqK0bb^ClTKsD(d=5" x="2225.421875" y="2017.5" w="220" h="120">
- Button A → Turn Left
</comment><comment id="*nPEPS~IH?Ww]qo0/wR*" x="2490.421875" y="2017.5" w="230" h="120">
- Button B → Turn Right
</comment><comment id="KvUc|6mS*7oW4x-ggOcA" x="2765.421875" y="2017.5" w="480" h="120">
Goal: Eat mushrooms to grow and increase your score.
</comment><comment id="-Xi2xI~i7v#PQN1DRR-0" x="3290.421875" y="2017.5" w="430" h="120">
Each mushroom speeds up the snake slightly.
</comment><comment id=";QhCyn:/5U`t6@sC1X0R" x="20" y="3039" w="480" h="120">
---------------------------------------------------------
</comment><comment id="wg(|mcP$|y1f*Bu#Pwbp" x="545" y="3039" w="170" h="120">
--- Variables ---
</comment><block type="pxt-on-start" id="vXGlGZL(ob|i{(P/LvI:" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="AiFg/pL8-n|hINA%Kf]+"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let mushroom: game.LedSprite = null" numlines="1" declaredvars="mushroom"></mutation><next><block type="variables_set" id="]yssp|N$tTvLggNHt47N"><field name="VAR" id="oTq|-+yYdRNA2kF2vU~Q">snakeSpeed</field><value name="VALUE"><shadow type="math_number" id="8PBCUFJ|RtG]YhFIXfAT"><field name="NUM">500</field></shadow></value><next><block type="variables_set" id=";vTuoZw^g-mOJ41bUo+I"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field><comment pinned="false" h="80" w="160">--- Game Setup ---</comment><value name="VALUE"><shadow type="math_number" id="?1WQjOw9]jsx!YO3sn#:"><field name="NUM">0</field></shadow><block type="game_create_sprite" id="2mc$dZBht,uTaJjKwXI;"><value name="x"><shadow type="math_number" id="nxe|VdA;)puj],++/5PL"><field name="NUM">2</field></shadow></value><value name="y"><shadow type="math_number" id="2kGQqW#$l}ujq)xV.@,W"><field name="NUM">2</field></shadow></value></block></value><next><block type="game_turn_sprite" id="4e$?fPH?gC_j]U={g^j~"><field name="direction">Direction.Right</field><comment pinned="false" h="80" w="160">set an initial direction: turn right 90 so next move goes to the right</comment><value name="sprite"><block type="variables_get" id="p3@tbT55BTrW%!9Ua1:I"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="degrees"><shadow type="math_number" id="p-?OvLoPgf;H}#)YO0ps"><field name="NUM">90</field></shadow></value><next><block type="variables_set" id="0tuK)8*`68Y#Tpi[2ooj"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field><value name="VALUE"><shadow type="math_number" id="sQEA2[lnZ_G.|a3G*)@="><field name="NUM">0</field></shadow><block type="lists_create_with" id="=eoz%%eze!nR}M+t|NB|"><mutation items="0" horizontalafter="3"></mutation></block></value><next><block type="variables_set" id="i+]u7(T]yJ{Wwy+w8[t-"><field name="VAR" id="AT/CFI);*9![D)R@m+tk">snakeCrash</field><value name="VALUE"><shadow type="math_number" id="vC+ipVGy{Q$!{=c}TpJm"><field name="NUM">0</field></shadow><block type="logic_boolean" id="+3)@[?2PPr6IPA}%(LrE"><field name="BOOL">FALSE</field></block></value><next><block type="variables_set" id="VCibHH,=$MQgBlD9Kz]F"><field name="VAR" id="oTq|-+yYdRNA2kF2vU~Q">snakeSpeed</field><value name="VALUE"><shadow type="math_number" id=":eC{Tz=)Fp[3`1lD}Nt("><field name="NUM">500</field></shadow></value><next><block type="variables_set" id="Ti~g}B?B/UET[#oq2iK1"><field name="VAR" id=";In?f%IDopW)JuSppk#k">gameScore</field><value name="VALUE"><shadow type="math_number" id="i%LScle$urWGci![,^*O"><field name="NUM">0</field></shadow></value><next><block type="function_call" id="LHpE|L}%.N.}b/-%[L4`"><mutation name="setMushroom" functionid="=?,@9G^~P?Y@,ovT:{i/"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id="1Sf5.PPV|g_TL`Bix.Ir" x="723" y="20"><field name="NAME">Button.A</field><comment pinned="false" h="80" w="160">--- Button Controls ---</comment><statement name="HANDLER"><block type="game_turn_sprite" id="=y_T7O93E=1=}?N9`jxD"><field name="direction">Direction.Left</field><value name="sprite"><block type="variables_get" id="~1})piO,)/C|pO-Y~-V!"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="degrees"><shadow type="math_number" id="ZAL*[BgkN|st@0V3L,g$"><field name="NUM">90</field></shadow></value></block></statement></block><block type="device_button_event" id="vGXS:8][Lt45sRD+KJ06" x="1196" y="20"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="game_turn_sprite" id="].s0EImNB=x{zA:f$8Yo"><field name="direction">Direction.Right</field><value name="sprite"><block type="variables_get" id="OPk[SWya%0DKW-qH?}74"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="degrees"><shadow type="math_number" id="^2#sW`ke;yS#F_2I[j0n"><field name="NUM">90</field></shadow></value></block></statement></block><block type="device_forever" id="jMOb:wU+%fjgC!*CV8+~" x="1677" y="20"><comment pinned="false" h="80" w="160">--- Main Game Loop ---</comment><statement name="HANDLER"><block type="function_call" id="o#%.[MLU@0}#qUrnmA4f"><mutation name="moveSnake" functionid="Cp8TbJdJ|nd,vM8r)Iua"></mutation><next><block type="device_pause" id=":pRL:Q?YDr!yMg,}DBEv"><value name="pause"><shadow type="timePicker" id="kvl`1J+W=Jg-e*eR*qJe"><field name="ms">500</field></shadow><block type="variables_get" id="!!}.ns0nOpFO8n:a*,~4"><field name="VAR" id="oTq|-+yYdRNA2kF2vU~Q">snakeSpeed</field></block></value></block></next></block></statement></block><block type="function_definition" id="G2rNANr-FPZ{qUVb%Bmh" x="2008" y="20"><mutation name="setMushroom" functionid="=?,@9G^~P?Y@,ovT:{i/"></mutation><field name="function_name">setMushroom</field><comment pinned="false" h="80" w="160">--- Function: place a new mushroom (not on snake) ---</comment><statement name="STACK"><block type="device_while" id="%rIUHhN~]cC/V}BfaP(/"><value name="COND"><shadow type="logic_boolean" id="?cQ=E{|}#PRu-|PmZoYU"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="d:U4vTUmalfjMq-Riil}"><value name="BOOL"><shadow type="logic_boolean" id="Vz^bFI.SA#DP!2ZCyOYe"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="DVQ=Oru?0R:P!B6fI002"><field name="VAR" id="}CZ|d@Q}079J_)i5Z?$y">validPosition</field></block></value></block></value><statement name="DO"><block type="variables_set" id="0`y(Sl/#eM*HN6B%J8u6"><field name="VAR" id="ncM*AkOnb$uWh-0*Ft}X">x</field><value name="VALUE"><shadow type="math_number" id=")UTjmkTt?A)QO]gj^3/c"><field name="NUM">0</field></shadow><block type="device_random" id="q.}Ov;j;|C0uTT9BAd?8"><value name="min"><shadow type="math_number" id="bsSF`$drze8W{ppN+H5Q"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="akIfV]x6gAeS=WS?(8g4"><field name="NUM">4</field></shadow></value></block></value><next><block type="variables_set" id="$Uy.Yh7IMvJQVSH$^mMR"><field name="VAR" id="Xu/EQ$W596NZeWxsm|-?">y</field><value name="VALUE"><shadow type="math_number" id="tNThQgnmqT|q@@|@6{j)"><field name="NUM">0</field></shadow><block type="device_random" id="?^1f8yz_U(V+cnN?RdrZ"><value name="min"><shadow type="math_number" id="La(f7-{n-lJT@MQcJ`$4"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="QrSGs$NJLLB~4I7XnOtG"><field name="NUM">4</field></shadow></value></block></value><next><block type="variables_set" id="iRRIlY3BI@zoORU(Q[/G"><field name="VAR" id="}CZ|d@Q}079J_)i5Z?$y">validPosition</field><value name="VALUE"><shadow type="math_number" id="?u63J=jFWk@|xlQfW$yC"><field name="NUM">0</field></shadow><block type="logic_boolean" id="aZoG)s+g6$~~g#W,tUF0"><field name="BOOL">TRUE</field></block></value><next><block type="controls_if" id="-A4!mnx[pq,hzLjjr,;/"><comment pinned="false" h="80" w="160">ensure it doesn't spawn on the head</comment><value name="IF0"><shadow type="logic_boolean" id="1J/UMg$%j#p)(vO(Jj|Y"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="de1VvH@ueP.(T2:l@AxD"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="/#u4G%qce%T.vH7e_G:,"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="}13tF)i6MJS3)Ue^5D7+"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=".LEVlD*!CT=*|q:l~VP8"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="q*~*K`Fw3yM*v6KVNQ6{"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="8(CL~H$;w},$8Epc#pl~"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><value name="B"><shadow type="math_number" id="SZ?^Jo7r!;4jZ)*`7K0!"><field name="NUM">0</field></shadow><block type="variables_get" id="^Kb[aBZGI8)y0+}C+d^f"><field name="VAR" id="ncM*AkOnb$uWh-0*Ft}X">x</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="F|AO7AUh`A::biA_X?fJ"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="C.z9nh$/`~dNZ^Vjb7K="><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="nH9s%J9Syu/@[|i.D,HF"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="k8tJ2z=djFJM?BUG],xY"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="}.BHVELB|E0JQeH+P}UL"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><value name="B"><shadow type="math_number" id="(ubwd9+!1^_RjdiE4|0="><field name="NUM">0</field></shadow><block type="variables_get" id="K)dWEGCk{!P%z*W;6qjr"><field name="VAR" id="Xu/EQ$W596NZeWxsm|-?">y</field></block></value></block></value></block></value><statement name="DO0"><block type="variables_set" id="Gw6bBGBN}bh]}Jjs0UM?"><field name="VAR" id="}CZ|d@Q}079J_)i5Z?$y">validPosition</field><value name="VALUE"><shadow type="math_number" id="T~@HQn,w1v93Si?.=/$1"><field name="NUM">0</field></shadow><block type="logic_boolean" id="aG7^akkO(}^hO4W3`!pd"><field name="BOOL">FALSE</field></block></value></block></statement><next><block type="pxt_controls_for_of" id="`C][YcnVLTZ-Md5UVdE6"><comment pinned="false" h="80" w="160">ensure it doesn't spawn on any tail segment</comment><value name="VAR"><block type="variables_get_reporter" id="Rf,orv_|+jYCINcE^Hx#" deletable="false"><field name="VAR" id="PlwaztFXvg=bl2p0cvNx">part</field></block></value><value name="LIST"><block type="variables_get" id=")IbWZ:-LM.5)c9KISn~+"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value><statement name="DO"><block type="controls_if" id="ZvB?wB$8(#cOsCpUP]L8"><value name="IF0"><shadow type="logic_boolean" id="XLt`huq5PP1-7`@a1$+b"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="o0#ZoisgPrd|h2d:ME|6"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="s/*m3oa[VK:t6?|4TY;:"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="6d01mVWPj07]E:5yeJLi"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="$@AnxgD/VN@0nNPFPwg^"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="ND][A{Gux-]{)@`xMu]r"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="^7f]5/LSkb.He?w9}1OC"><field name="VAR" id="PlwaztFXvg=bl2p0cvNx">part</field></block></value></block></value><value name="B"><shadow type="math_number" id="pddlmpHFbQgG!AQszaa^"><field name="NUM">0</field></shadow><block type="variables_get" id="|wGBH%2hSKCDb:Zj84rB"><field name="VAR" id="ncM*AkOnb$uWh-0*Ft}X">x</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="y]tLR%mMcpcSIIub-.Un"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="|)8qt$53z{abKdDv4`Oz"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="@KF,}viGQ`N2[o(XQ6V0"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="$(Tn+g9Mn0^MR|uCHzfy"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="mL}I+[-y2MSXzlz{?qhU"><field name="VAR" id="PlwaztFXvg=bl2p0cvNx">part</field></block></value></block></value><value name="B"><shadow type="math_number" id="VG]V[ONb|aHZ+dcWH)Q9"><field name="NUM">0</field></shadow><block type="variables_get" id="|s@Nk3.KgU.z=jGbDFu$"><field name="VAR" id="Xu/EQ$W596NZeWxsm|-?">y</field></block></value></block></value></block></value><statement name="DO0"><block type="variables_set" id="Iy0rgK:g]2^%jEI?M=1s"><field name="VAR" id="}CZ|d@Q}079J_)i5Z?$y">validPosition</field><value name="VALUE"><shadow type="math_number" id="~_Ep?XU$LFa2m2sjwCv~"><field name="NUM">0</field></shadow><block type="logic_boolean" id="qK{2@pohML$UoKZwsBtX"><field name="BOOL">FALSE</field></block></value></block></statement></block></statement></block></next></block></next></block></next></block></next></block></statement><next><block type="controls_if" id="8VTJj)[YKf)|FOO5aI}R"><comment pinned="false" h="80" w="160">create mushroom sprite</comment><value name="IF0"><shadow type="logic_boolean" id="%`bd.IrMsA)lSFlfhrMP"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="JVu?J^U{+B5PgNg^]Z3("><field name="VAR" id="HNbH;-1x=fJBIIlyR0?g">mushroom</field></block></value><statement name="DO0"><block type="game_delete_sprite" id="O~9..SaC}4.?T1D(J!b]"><value name="this"><block type="variables_get" id="n?iCzE*jmL*oRv(P7al+"><field name="VAR" id="HNbH;-1x=fJBIIlyR0?g">mushroom</field></block></value></block></statement><next><block type="variables_set" id="aBLLmi]=45d5etg,jMkn"><field name="VAR" id="HNbH;-1x=fJBIIlyR0?g">mushroom</field><value name="VALUE"><shadow type="math_number" id="hYa-:/K?:N+yJjJvjv#R"><field name="NUM">0</field></shadow><block type="game_create_sprite" id="0?86o8x=]p|h0IpoJb%="><value name="x"><block type="variables_get" id="f=#F@BEB/N*$`Nwzn0$z"><field name="VAR" id="ncM*AkOnb$uWh-0*Ft}X">x</field></block></value><value name="y"><block type="variables_get" id="6FoK_ysa_7jXRcLbbrO+"><field name="VAR" id="Xu/EQ$W596NZeWxsm|-?">y</field></block></value></block></value><next><block type="game_sprite_set_property" id="1fRy0I?pd^0D?|3n:JC/"><field name="property">LedSpriteProperty.Blink</field><value name="sprite"><block type="variables_get" id="h[kt%,91q$pIq~*igIf1"><field name="VAR" id="HNbH;-1x=fJBIIlyR0?g">mushroom</field></block></value><value name="value"><shadow type="math_number" id="bEfGE]x)F?FkUU.Q5rJP"><field name="NUM">100</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="yj0o`D~O=p~xu:B{Uqbi" x="3074" y="20"><mutation name="moveSnake" functionid="Cp8TbJdJ|nd,vM8r)Iua"></mutation><field name="function_name">moveSnake</field><comment pinned="false" h="80" w="160">--- Function: move snake forward ---</comment><statement name="STACK"><block type="variables_set" id="[2NZ}Q;[/%kp|^K%pI?5"><field name="VAR" id="aLW#MCeMqd,H9,*33Ij%">prevX</field><value name="VALUE"><shadow type="math_number" id="op@f$y/xNoVUA#^6QaJ?"><field name="NUM">0</field></shadow><block type="game_sprite_property" id=";Ty)6:ns@qD)syLoCAc:"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="R;tJ~Rebz+/|KlA#;JM~"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><next><block type="variables_set" id="v2bZ;^Hw_;vR}2H~$EO%"><field name="VAR" id=".wpzdpdpN)Rt|++TJmfI">prevY</field><value name="VALUE"><shadow type="math_number" id="8$}Z.5767HGD|J%~Q.%f"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="}4Vr1kgYj?FpV#)B58%i"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="Xa:H=@f).=WqsO/+ZP/E"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><next><block type="game_move_sprite" id="Ftb`.@lvgfO@[x@o+@=_"><comment pinned="false" h="80" w="160">move forward one step</comment><value name="sprite"><block type="variables_get" id="M|2br]?ACI[s|YKbIn;6"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="leds"><shadow type="math_number" id="{wb[_Naio)Ktk_I*ukH7"><field name="NUM">1</field></shadow></value><next><block type="controls_if" id="K}a.Du-Np`|!JUk7$T1c"><comment pinned="false" h="80" w="160">handle wrapping at edges (teleport around screen)</comment><value name="IF0"><shadow type="logic_boolean" id="#pW1:RK2bC2%jXGz#CR7"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="8r-bpFXOvxC8h?x6E57b"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="EkkIAw~d]7Hw)fI=q%2J"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="|_m:kbfQx#[(~lFm;n?r"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="])JkR[-N9-i{YzRM|i[R"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><value name="B"><shadow type="math_number" id="eOIu%dj;,?89ywf5Qo#S"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="game_sprite_set_property" id="H;ek*1}+LJhuEKdc]_4X"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="?.q^-qSL@+@xF[wRS,5="><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="value"><shadow type="math_number" id="w8|[H4.w26~w%B`;OKRI"><field name="NUM">4</field></shadow></value></block></statement><next><block type="controls_if" id="V=[o-0cKjZ,iaG[rNeFL"><value name="IF0"><shadow type="logic_boolean" id="Kv:z3ZQ~dyH)gkXD:{tU"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="`B~0wN-]rvog;J~2$SQ#"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="5Fv~9_TgQLQR!`Qf,GV:"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="D{X:dh6A$[r/;s~qR3`["><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="AUWJGZo-]=!plPaBe_;q"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><value name="B"><shadow type="math_number" id="U9pJ^z^epzj6{$T/97#$"><field name="NUM">4</field></shadow></value></block></value><statement name="DO0"><block type="game_sprite_set_property" id="ZTbIO/_uabUKfr!#u)R/"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="YFVSyln0d1nbTXG@O:ln"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="value"><shadow type="math_number" id="zsYQ-XdcGPWC]-1byCxU"><field name="NUM">0</field></shadow></value></block></statement><next><block type="controls_if" id=".D.P]0[zyP]L,q16Q~=z"><value name="IF0"><shadow type="logic_boolean" id="J,Zo|L,}H{r!RhHO:fa?"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="qX_0odt..yDiFr0x!QXb"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="?d5_W6Te,RCc^4b+Wz4#"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="1%;/(y)@UE2(]9$~nejO"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="hPgXx5py6]5v]?m3VmL."><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><value name="B"><shadow type="math_number" id="a[zoj1OTG}{//*+{Ztqf"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="game_sprite_set_property" id="Kal}u.%N#Ky=)$YY;:x3"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="(|oqwf;lC9p;s}xXptgy"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="value"><shadow type="math_number" id="uGT0[48-+7(sEq#_Pxz@"><field name="NUM">4</field></shadow></value></block></statement><next><block type="controls_if" id="5z)KT:=JyiL|;^_a1v=Z"><value name="IF0"><shadow type="logic_boolean" id="#pIlZSTFP+{-H.U447-~"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="NlsP3fBZLB51?)7LBGVQ"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="]Q~V;6hCyY93qY(dPG7N"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="SX;uVq]SM2#+QRe!1Oh,"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="pu:oZvnJy265|6Epo.s!"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><value name="B"><shadow type="math_number" id=".KOPZW7|18@M]:O)}gR;"><field name="NUM">4</field></shadow></value></block></value><statement name="DO0"><block type="game_sprite_set_property" id="[MAzzsg@6#O@}H6/sj~S"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="?#h8vi1-dpd8yQb~OQ6C"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="value"><shadow type="math_number" id="~ch=D4;DR#;8v.,yUDTM"><field name="NUM">0</field></shadow></value></block></statement><next><block type="controls_if" id="rg=5-(`3mk,6)b3T@}Kr"><mutation else="1"></mutation><comment pinned="false" h="80" w="160">If the head actually moved (move returns true-ish by position check)</comment><value name="IF0"><shadow type="logic_boolean" id="eM7RZ+Jpb+_{R$ZEctrS"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="kQDP0D~jEb]n|Z=gJ^Lq"><field name="OP">OR</field><value name="A"><shadow type="logic_boolean" id="%UWOo@TLNz8Vs!hbDAm8"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="D];LYqZav|{=jbL$p!GO"><field name="OP">NEQ</field><value name="A"><shadow type="math_number" id="n8$Be1zG3aX5?Kj`n11="><field name="NUM">0</field></shadow><block type="game_sprite_property" id="+tDx+#f,3Mg-EBz*m%I,"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="FQLyc3+1oErV`44{if7w"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><value name="B"><shadow type="math_number" id="hQd`38vr2kEJ6PES_oAp"><field name="NUM">0</field></shadow><block type="variables_get" id="e~Yvw.RZs0L}krh:?y5]"><field name="VAR" id="aLW#MCeMqd,H9,*33Ij%">prevX</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="[}[P0#e$6$tir|VVyUN~"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="hgQujxKia#eU{tCP@rN4"><field name="OP">NEQ</field><value name="A"><shadow type="math_number" id=")2~bTjvQitC3|qlUzgCB"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="Nzxr9wx:%6h0t|ZnbOlN"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="52V}wH|Bh#bnJF!{a8xp"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><value name="B"><shadow type="math_number" id="WIR7?Q7}~i9x=S/R11E^"><field name="NUM">0</field></shadow><block type="variables_get" id="xUr8D5,wp@b.zHn|@?zr"><field name="VAR" id=".wpzdpdpN)Rt|++TJmfI">prevY</field></block></value></block></value></block></value><statement name="DO0"><block type="controls_if" id=".zOYFUjTA3nyV$OcpH:U"><comment pinned="false" h="80" w="160">only update tail if there are tail parts</comment><value name="IF0"><shadow type="logic_boolean" id="qvq!L@(r-)lt_3tf^@^V"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Rz!^oLi8xK2_Z,S~CLoB"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="gG0cHCZ{xPI5i3e}-~WG"><field name="NUM">0</field></shadow><block type="lists_length" id="u8pIc,_f1jbCRI+vr4dQ"><value name="VALUE"><block type="variables_get" id="Gy,?vmSPhBD-i47QbYl{"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value></block></value><value name="B"><shadow type="math_number" id="VwA2X--cK7IXJUgaDiL+"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="array_unshift_statement" id="8pU,^:DKRwgM-wWP+sGn"><comment pinned="false" h="80" w="160">add new segment where the head used to be</comment><value name="list"><block type="variables_get" id="2C[#l%!QulzZg}XI+LeV"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value><value name="value"><block type="game_create_sprite" id="m]?As^7YF-!avVT~q5Uq"><value name="x"><block type="variables_get" id="VsO@3b/F:*t{_vMYHHoh"><field name="VAR" id="aLW#MCeMqd,H9,*33Ij%">prevX</field></block></value><value name="y"><block type="variables_get" id=";v8V9:hgN;h?h|JH$%$4"><field name="VAR" id=".wpzdpdpN)Rt|++TJmfI">prevY</field></block></value></block></value><next><block type="variables_set" id="z[.kuFjNyy]lenmk+Ep0"><field name="VAR" id="~VV0uO:T`f2t#UH%5wQY">tailEnd</field><comment pinned="false" h="80" w="160">remove the last tail sprite (pop returns it)</comment><value name="VALUE"><shadow type="math_number" id="g{43tA~+637IdEhq05T+"><field name="NUM">0</field></shadow><block type="array_pop" id="jQ4ej5U~/XanPpfB(pz;"><value name="list"><block type="variables_get" id="Gn1?k@SS_uS:=fTJc|/j"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value></block></value><next><block type="controls_if" id="OjE,:@~wqFlKZ1bU0V|`"><value name="IF0"><shadow type="logic_boolean" id="sWQ7.B:{[L/dWJSlcvB;"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="EI0)%nQ24stUS3v/W)I~"><field name="VAR" id="~VV0uO:T`f2t#UH%5wQY">tailEnd</field></block></value><statement name="DO0"><block type="game_delete_sprite" id="j2}-H|)LA{7%yx;x0xQg"><value name="this"><block type="variables_get" id="Ee$D(iSH-^$|Q3^,LOHq"><field name="VAR" id="~VV0uO:T`f2t#UH%5wQY">tailEnd</field></block></value></block></statement></block></next></block></next></block></statement><next><block type="pxt_controls_for_of" id="[K(x{{8}Br=(9f^r/GRr"><comment pinned="false" h="80" w="160">check collision with tail segments</comment><value name="VAR"><block type="variables_get_reporter" id="8GUJGy8SSPI!}YLhoZ2q" deletable="false"><field name="VAR" id=";e2:10#Mxd6=$p:ZRbyM">segment</field></block></value><value name="LIST"><block type="variables_get" id="qb#-VRb$B2`~Xp7YT?T5"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value><statement name="DO"><block type="controls_if" id="fXsoMKJ|0g)FrZ2DIAtT"><value name="IF0"><shadow type="logic_boolean" id="0]K{6VkU8b]Pf^^:`Bmy"><field name="BOOL">TRUE</field></shadow><block type="game_sprite_touching_sprite" id="vb`e#GxC;JC#)QX-f2}v"><value name="sprite"><block type="variables_get" id="Wb6eg;BmxAeN?N3N,K7|"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="other"><block type="variables_get" id="8_?E:ri3:.tAu4t+t(?_"><field name="VAR" id=";e2:10#Mxd6=$p:ZRbyM">segment</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="UST(hp2m^|W)ez]2tHIt"><field name="VAR" id="AT/CFI);*9![D)R@m+tk">snakeCrash</field><value name="VALUE"><shadow type="math_number" id=",pc{n.n=Aj5Nn54o:FDQ"><field name="NUM">0</field></shadow><block type="logic_boolean" id="Q-RK)fZ-Vv?Pd2YkYFDz"><field name="BOOL">TRUE</field></block></value><next><block type="break_keyword" id="KTsXT`@[_!LTUDAsN)Y|"></block></next></block></statement></block></statement></block></next></block></statement><statement name="ELSE"><block type="variables_set" id="Uyp+jH}T)i?Yzr(e1ge$"><field name="VAR" id="AT/CFI);*9![D)R@m+tk">snakeCrash</field><comment pinned="false" h="80" w="160">head didn't move (blocked) -&gt; crash</comment><value name="VALUE"><shadow type="math_number" id="N8@/fIeIlRKZW@A=)w`O"><field name="NUM">0</field></shadow><block type="logic_boolean" id="o5kD5))CWXu-qu+yeibC"><field name="BOOL">TRUE</field></block></value></block></statement><next><block type="controls_if" id=":IZ[w[J:K!kY1o`05RVh"><comment pinned="false" h="80" w="160">check mushroom collision (eating)</comment><value name="IF0"><shadow type="logic_boolean" id=".Z+oQz]}tQnd{Tus[=W?"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="Uqufi$n%D2fEs4;k$k:("><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id=".IB5nLxQhN|K]Pd4ryc)"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="!]BJ`A(i$^%2Omx?z%u*"><field name="VAR" id="HNbH;-1x=fJBIIlyR0?g">mushroom</field></block></value><value name="B"><shadow type="logic_boolean" id="GU#;uB5$][oSp](Lv27G"><field name="BOOL">TRUE</field></shadow><block type="game_sprite_touching_sprite" id="a1o.RvBwB2#Hym(1q^jH"><value name="sprite"><block type="variables_get" id="s/?ADVje]i1HzqLW-er*"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value><value name="other"><block type="variables_get" id="+/=Ns*FIoAhP!p2Al5m;"><field name="VAR" id="HNbH;-1x=fJBIIlyR0?g">mushroom</field></block></value></block></value></block></value><statement name="DO0"><block type="function_call" id="QiQO0:OlKx!R{[BjrDP}"><mutation name="eatMushroomAndGrowSnake" functionid="ZYO#:P~?=kAm^~1O/o(W"></mutation></block></statement><next><block type="controls_if" id=")#/28p~a0kmRDeRto~{}"><comment pinned="false" h="80" w="160">if crash detected → end game</comment><value name="IF0"><shadow type="logic_boolean" id="6K9.]a4%c:a]Lbvu$0h8"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="$dpXRKy+9K|=f)t:Uz.{"><field name="VAR" id="AT/CFI);*9![D)R@m+tk">snakeCrash</field></block></value><statement name="DO0"><block type="game_set_score" id=":WDej]vF.+{(n!4)Hv_W"><value name="points"><block type="variables_get" id="Tc37-?G69NoPgRs{z%,N"><field name="VAR" id=";In?f%IDopW)JuSppk#k">gameScore</field></block></value><next><block type="game_game_over" id="z7)kG06oTZs$00Sfv.m="></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="_UY=10/.Lg*dAB1Sd22l" x="20" y="2018"><mutation name="eatMushroomAndGrowSnake" functionid="ZYO#:P~?=kAm^~1O/o(W"></mutation><field name="function_name">eatMushroomAndGrowSnake</field><comment pinned="false" h="80" w="160">--- Function: grow the snake after eating ---</comment><statement name="STACK"><block type="controls_if" id="P}KcXu,iTMzQmY}oU,2q"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="A:lWW]vVsJ0#=1eD,2eu"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="c!2rvcvCS5;`Va^`*;D~"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="+O6[7d.F/I(6J?[M0`!x"><field name="NUM">0</field></shadow><block type="lists_length" id="P~=@F|iz:GKg#H=Q!/_d"><value name="VALUE"><block type="variables_get" id="`Z1g?T=dFd?E^p-d}?(0"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value></block></value><value name="B"><shadow type="math_number" id="VWF0~vA=7)]MIGtv)l?^"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="ja9tS%kce=evqj};1+8F"><field name="VAR" id="d`C)Bp_2F*=R^+DU/VaO">x2</field><value name="VALUE"><shadow type="math_number" id="+SOt-]Ml2Y#Lo9Z%?c~C"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="[k#{GK#[d*EOCxWn/x_%"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="variables_get" id="lZ0.[h4cX(e.hQCJA_!1"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value><next><block type="variables_set" id="%jo|Y,N$On|_@y%7b2$N"><field name="VAR" id="1g0O-P8[39`]4[j^?Xhy">y2</field><value name="VALUE"><shadow type="math_number" id="CG;HDjJ9{]x#PGo7XJ*N"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="=kf6t;G@5,kl1Z$ui{*`"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="variables_get" id="UN:)(4T[3w7f@R^J`TT2"><field name="VAR" id="omRj!Gw(ddDOk1kaEKeE">snakeHead</field></block></value></block></value></block></next></block></statement><statement name="ELSE"><block type="variables_set" id="%)`z3p]Njb0vKh4aGXtJ"><field name="VAR" id="d`C)Bp_2F*=R^+DU/VaO">x2</field><value name="VALUE"><shadow type="math_number" id="YH$.ZWL7+]rpQb9,YqQ?"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="uZ8_7~j,-l,1G,T)iNs6"><field name="property">LedSpriteProperty.X</field><value name="sprite"><block type="lists_index_get" id="?Z8:1w/8g%*tjfso0tcW"><value name="LIST"><block type="variables_get" id="xMYhU3BnJ+,`~F@;.8OD"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value><value name="INDEX"><shadow type="math_number" id="cg{Jqr:L$q2]kJ59Jd_#"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="5PZ`xL(Xs]U6uK_!?=mE"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="t;*;#v{*88$fc47G#oKy"><field name="NUM">0</field></shadow><block type="lists_length" id="[(R18){+;J#yP*PuJjwo"><value name="VALUE"><block type="variables_get" id="zAD=u!sKi2H]=oi4x+!0"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value></block></value><value name="B"><shadow type="math_number" id="5K|(hCGyBc9BX[c()k4%"><field name="NUM">1</field></shadow></value></block></value></block></value></block></value><next><block type="variables_set" id="Z?CMJ@]$l[@:f$j:-(6."><field name="VAR" id="1g0O-P8[39`]4[j^?Xhy">y2</field><value name="VALUE"><shadow type="math_number" id="f.XBNUfr5)@n5%V1cY-b"><field name="NUM">0</field></shadow><block type="game_sprite_property" id="y~C;WNsGOnD#P:|j.B#G"><field name="property">LedSpriteProperty.Y</field><value name="sprite"><block type="lists_index_get" id="0$[,}*$U$JFq!;!#s1-p"><value name="LIST"><block type="variables_get" id=":9dDT[Z:g:s;bcX{``G;"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value><value name="INDEX"><shadow type="math_number" id=",wdNXQ!0)i/]r;B]L+B7"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="*`NGq~N@Mi7SVz@(9IF$"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="^~pibA%32b*LEu)b4Q3E"><field name="NUM">0</field></shadow><block type="lists_length" id="^(1_~pDP?-I93(|8CW*G"><value name="VALUE"><block type="variables_get" id="vBa@$Uk,8p3@arCM:D%~"><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value></block></value><value name="B"><shadow type="math_number" id="~36v_R:{bq9FfD=NN.8o"><field name="NUM">1</field></shadow></value></block></value></block></value></block></value></block></next></block></statement><next><block type="array_push" id="GAE8[`=0,F`G=:{;z2Zz"><comment pinned="false" h="80" w="160">create new tail segment at the end position</comment><value name="list"><block type="variables_get" id="c)42q75!yPDyX_kJ$Hm."><field name="VAR" id="~yY5wc:^AdZVsThFcn0x">snakeTail</field></block></value><value name="value"><block type="game_create_sprite" id="76QdrX=pa1YzLy{m.ca~"><value name="x"><block type="variables_get" id="jf#Dc{bXus[62#}(TSMT"><field name="VAR" id="d`C)Bp_2F*=R^+DU/VaO">x2</field></block></value><value name="y"><block type="variables_get" id="JbQ:J6Qhx6(?gi+dZ.G!"><field name="VAR" id="1g0O-P8[39`]4[j^?Xhy">y2</field></block></value></block></value><next><block type="controls_if" id="ww.Ml|AS]*1DHo_,2x(]"><comment pinned="false" h="80" w="160">delete mushroom and increment score &amp; speed</comment><value name="IF0"><shadow type="logic_boolean" id="t8$5i)*ygXxf)U~0NOh("><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="eH;w==FSD%(s]q{2I:)a"><field name="VAR" id="HNbH;-1x=fJBIIlyR0?g">mushroom</field></block></value><statement name="DO0"><block type="game_delete_sprite" id="*ojaW2yY.HDYG]+4MI/%"><value name="this"><block type="variables_get" id="CS@4d98Jo)?w7bI(gU1:"><field name="VAR" id="HNbH;-1x=fJBIIlyR0?g">mushroom</field></block></value><next><block type="typescript_statement" id="CDz8#?xrCqnvwhxsCu{."><mutation xmlns="http://www.w3.org/1999/xhtml" line0="mushroom = null" numlines="1"></mutation></block></next></block></statement><next><block type="variables_change" id="m?LrDCYv9R*:j7Eto137"><field name="VAR" id=";In?f%IDopW)JuSppk#k">gameScore</field><value name="VALUE"><shadow type="math_number" id="awXXw:_e|-LY]t`slwVv"><field name="NUM">1</field></shadow></value><next><block type="controls_if" id="+#(=XXrNm6#Ho|}m0-vm"><value name="IF0"><shadow type="logic_boolean" id="*G{GjZ{}Ai5I4MAm-}_P"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="t:wh_zKJ3HL@^Aj]D2IB"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="k7,dY_9iL%zl(3Co7`Vz"><field name="NUM">0</field></shadow><block type="variables_get" id="YzBQ*QDG20wWa,a(z!zW"><field name="VAR" id="oTq|-+yYdRNA2kF2vU~Q">snakeSpeed</field></block></value><value name="B"><shadow type="math_number" id="p{cbV#D=4j}:WmMGi`/2"><field name="NUM">100</field></shadow></value></block></value><statement name="DO0"><block type="variables_change" id="{gz4DJ}wUU4+jpGdQ|y8"><field name="VAR" id="oTq|-+yYdRNA2kF2vU~Q">snakeSpeed</field><value name="VALUE"><shadow type="math_number" id="abZxdD(egn3?mM#BHCDk"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Tx[l,q4CdFsx{l?iV[+R"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id=":UE4OQzje9`cO9WFHkcQ"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="i!qDyb90x8C$bYO_fI#k"><field name="NUM">25</field></shadow></value></block></value></block></statement><next><block type="function_call" id="puA,Dwi:)I)UA#?-~6PX"><mutation name="setMushroom" functionid="=?,@9G^~P?Y@,ovT:{i/"></mutation><comment pinned="false" h="80" w="160">spawn a new mushroom (won't spawn on snake because setMushroom checks)</comment></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>